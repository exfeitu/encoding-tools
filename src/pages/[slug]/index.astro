---
// src/pages/[slug]/index.astro
import { getEntryBySlug, getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

type Tool = CollectionEntry<"tools">;

export async function getStaticPaths() {
  const tools = await getCollection("tools");
  return tools.map((tool: Tool) => ({
    params: { slug: tool.slug },
  }));
}

const { slug } = Astro.params;
const entry = await getEntryBySlug("tools", slug);
if (!entry) {
  return Astro.redirect("/404");
}

const { data } = entry;
const { Content } = await entry.render();
const { h1, meta_desc, template } = data;

let toolHtml = "";
let toolScript = "";

// Ê†πÊçÆ template Ê∏≤Êüì‰∏çÂêåÂ∑•ÂÖ∑
switch (template) {
  case "converter":
    toolHtml = `
      <div class="tool-wrapper">
        <div class="tool-container three-column">
          <div class="input-section">
            <div class="section-header">
              <label for="input" class="section-label">
                <span class="label-icon">üì•</span>
                <span>ËæìÂÖ• JSON</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="input" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="input" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="input" class="tool-input" placeholder='{ "hello": "world" }' spellcheck="false"></textarea>
          </div>
          
          <div class="middle-buttons">
            <button class="primary-btn convert-json-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
              JSON‚ÜíYAML
            </button>
            <button class="primary-btn convert-yaml-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              YAML‚ÜíJSON
            </button>
          </div>
          
          <div class="output-section">
            <div class="section-header">
              <label for="output" class="section-label">
                <span class="label-icon">üì§</span>
                <span>ËæìÂá∫ YAML</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="output" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="output" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="output" class="tool-input" placeholder='hello: world' spellcheck="false"></textarea>
          </div>
        </div>
      </div>
    `;
    toolScript = `
      const inputEl = document.getElementById('input');
      const outputEl = document.getElementById('output');
      const convertJsonBtn = document.querySelector('.convert-json-btn');
      const convertYamlBtn = document.querySelector('.convert-yaml-btn');
      
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js';
      script.onload = () => {
        window.jsyaml = jsyaml;
        
        // JSON -> YAML ÊåâÈíÆ
        convertJsonBtn.addEventListener('click', () => {
          if (!inputEl.value.trim()) {
            outputEl.value = '';
            return;
          }
          try {
            const json = JSON.parse(inputEl.value);
            const yamlStr = window.jsyaml.dump(json);
            outputEl.value = yamlStr;
          } catch (e) {
            outputEl.value = '‚ùå Êó†ÊïàÁöÑ JSON: ' + e.message;
          }
        });
        
        // YAML -> JSON ÊåâÈíÆ
        convertYamlBtn.addEventListener('click', () => {
          if (!outputEl.value.trim()) {
            inputEl.value = '';
            return;
          }
          try {
            const yamlObj = window.jsyaml.load(outputEl.value);
            const jsonStr = JSON.stringify(yamlObj, null, 2);
            inputEl.value = jsonStr;
          } catch (e) {
            inputEl.value = '‚ùå Êó†ÊïàÁöÑ YAML: ' + e.message;
          }
        });
      };
      document.head.appendChild(script);
      
      setupButtons();
    `;
    break;

  case "encoder":
    toolHtml = `
      <div class="tool-wrapper">
        <div class="tool-container three-column">
          <div class="input-section">
            <div class="section-header">
              <label for="input" class="section-label">
                <span class="label-icon">üìù</span>
                <span>ÂéüÂßãÊñáÊú¨</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="input" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="input" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="input" class="tool-input" placeholder='Hello World' spellcheck="false"></textarea>
          </div>
          
          <div class="middle-buttons">
            <button class="primary-btn encode-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
              ÁºñÁ†Å
            </button>
            <button class="primary-btn decode-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              Ëß£Á†Å
            </button>
          </div>
          
          <div class="output-section">
            <div class="section-header">
              <label for="output" class="section-label">
                <span class="label-icon">üîê</span>
                <span>Base64 ÁºñÁ†Å</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="output" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="output" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="output" class="tool-input" placeholder='SGVsbG8gV29ybGQ=' spellcheck="false"></textarea>
          </div>
        </div>
      </div>
    `;
    toolScript = `
      const inputEl = document.getElementById('input');
      const outputEl = document.getElementById('output');
      const encodeBtn = document.querySelector('.encode-btn');
      const decodeBtn = document.querySelector('.decode-btn');
      
      // ÁºñÁ†ÅÊåâÈíÆÔºöÂéüÂßãÊñáÊú¨ -> Base64
      encodeBtn.addEventListener('click', () => {
        if (!inputEl.value) {
          outputEl.value = '';
          return;
        }
        try {
          const text = inputEl.value;
          const encoded = btoa(unescape(encodeURIComponent(text)));
          outputEl.value = encoded;
        } catch (e) {
          outputEl.value = '‚ùå ÁºñÁ†ÅÂ§±Ë¥•: ' + e.message;
        }
      });
      
      // Ëß£Á†ÅÊåâÈíÆÔºöBase64 -> ÂéüÂßãÊñáÊú¨
      decodeBtn.addEventListener('click', () => {
        if (!outputEl.value.trim()) {
          inputEl.value = '';
          return;
        }
        try {
          const text = outputEl.value.trim();
          const decoded = decodeURIComponent(escape(atob(text)));
          inputEl.value = decoded;
        } catch (e) {
          inputEl.value = '‚ùå Ëß£Á†ÅÂ§±Ë¥•: ' + e.message;
        }
      });
      
      setupButtons();
    `;
    break;

  case "decoder":
    toolHtml = `
      <div class="tool-wrapper">
        <div class="tool-container three-column">
          <div class="input-section">
            <div class="section-header">
              <label for="input" class="section-label">
                <span class="label-icon">üîê</span>
                <span>Base64 ÁºñÁ†Å</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="input" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="input" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="input" class="tool-input" placeholder='SGVsbG8gV29ybGQ=' spellcheck="false"></textarea>
          </div>
          
          <div class="middle-buttons">
            <button class="primary-btn decode-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
              Ëß£Á†Å
            </button>
            <button class="primary-btn encode-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              ÁºñÁ†Å
            </button>
          </div>
          
          <div class="output-section">
            <div class="section-header">
              <label for="output" class="section-label">
                <span class="label-icon">üìù</span>
                <span>Ëß£Á†ÅÁªìÊûú</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="output" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="output" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="output" class="tool-input" placeholder='Hello World' spellcheck="false"></textarea>
          </div>
        </div>
      </div>
    `;
    toolScript = `
      const inputEl = document.getElementById('input');
      const outputEl = document.getElementById('output');
      const decodeBtn = document.querySelector('.decode-btn');
      const encodeBtn = document.querySelector('.encode-btn');
      
      // Ëß£Á†ÅÊåâÈíÆÔºöBase64 -> Ëß£Á†ÅÁªìÊûú
      decodeBtn.addEventListener('click', () => {
        if (!inputEl.value.trim()) {
          outputEl.value = '';
          return;
        }
        try {
          const text = inputEl.value.trim();
          const decoded = decodeURIComponent(escape(atob(text)));
          outputEl.value = decoded;
        } catch (e) {
          outputEl.value = '‚ùå Êó†ÊïàÁöÑ Base64: ' + e.message;
        }
      });
      
      // ÁºñÁ†ÅÊåâÈíÆÔºöËß£Á†ÅÁªìÊûú -> Base64
      encodeBtn.addEventListener('click', () => {
        if (!outputEl.value) {
          inputEl.value = '';
          return;
        }
        try {
          const text = outputEl.value;
          const encoded = btoa(unescape(encodeURIComponent(text)));
          inputEl.value = encoded;
        } catch (e) {
          inputEl.value = '‚ùå ÁºñÁ†ÅÂ§±Ë¥•: ' + e.message;
        }
      });
      
      setupButtons();
    `;
    break;

  case "validator":
    toolHtml = `
      <div class="tool-wrapper">
        <div class="tool-container three-column">
          <div class="input-section">
            <div class="section-header">
              <label for="input" class="section-label">
                <span class="label-icon">üìã</span>
                <span>ËæìÂÖ• JSON/YAML</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="input" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="input" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="input" class="tool-input" placeholder='{ "valid": "json" }' spellcheck="false"></textarea>
          </div>
          
          <div class="middle-buttons">
            <button class="primary-btn validate-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              È™åËØÅ
            </button>
          </div>
          
          <div class="output-section">
            <div class="section-header">
              <label for="output" class="section-label">
                <span class="label-icon">‚úì</span>
                <span>È™åËØÅÁªìÊûú</span>
              </label>
              <div class="button-group">
                <button class="action-btn copy-btn" data-target="output" title="Â§çÂà∂">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  Â§çÂà∂
                </button>
                <button class="action-btn paste-btn" data-target="output" title="Á≤òË¥¥">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                  </svg>
                  Á≤òË¥¥
                </button>
              </div>
            </div>
            <textarea id="output" class="tool-input" placeholder='È™åËØÅÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå...' spellcheck="false"></textarea>
          </div>
        </div>
      </div>
    `;
    toolScript = `
      const inputEl = document.getElementById('input');
      const outputEl = document.getElementById('output');
      const validateBtn = document.querySelector('.validate-btn');
      
      validateBtn.addEventListener('click', () => {
        if (!inputEl.value.trim()) {
          outputEl.value = '';
          return;
        }
        try {
          const text = inputEl.value;
          const parsed = JSON.parse(text);
          outputEl.value = '‚úÖ ÊúâÊïàÁöÑ JSON\\n\\nÂ∑≤Ëß£Êûê ' + JSON.stringify(parsed).length + ' ‰∏™Â≠óÁ¨¶\\n\\nÊ†ºÂºèÂåñÂêé:\\n' + JSON.stringify(parsed, null, 2);
        } catch (e) {
          outputEl.value = '‚ùå Êó†ÊïàÁöÑ JSON\\n\\nÈîôËØØ‰ø°ÊÅØ:\\n' + e.message;
        }
      });
      
      setupButtons();
    `;
    break;

  case "explain":
    toolHtml = "";
    toolScript = "";
    break;

  default:
    toolHtml = "<p>Unknown tool type.</p>";
    toolScript = "";
}
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{h1}</title>
    <meta name="description" content={meta_desc} />
    <meta property="og:title" content={h1} />
    <meta property="og:description" content={meta_desc} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --primary: #2563eb;
        --primary-light: #3b82f6;
        --primary-dark: #1e40af;
        --success: #10b981;
        --success-bg: #d1fae5;
        --error: #ef4444;
        --error-bg: #fee2e2;
        --bg-main: #f8fafc;
        --bg-card: #ffffff;
        --border: #e2e8f0;
        --text-primary: #0f172a;
        --text-secondary: #64748b;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
      }

      * {
        box-sizing: border-box;
      }

      html {
        height: 100%;
      }

      body {
        font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem 1.5rem;
        background: var(--bg-main);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 2rem;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .tool-wrapper {
        display: flex;
        flex-direction: column;
        flex: 1;
        min-height: 500px;
        overflow: hidden;
      }

      .tool-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        padding: 2rem;
        background: var(--bg-card);
        border-radius: 16px;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border);
        flex: 1;
        overflow: hidden;
      }

      .tool-container.three-column {
        grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
        gap: 1.5rem;
      }

      .middle-buttons {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        padding: 0 0.5rem;
      }

      .middle-buttons .primary-btn {
        padding: 1rem 1.5rem;
        min-width: 120px;
      }

      .action-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        padding: 1rem 0;
      }

      .primary-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 2rem;
        font-size: 1rem;
        font-weight: 600;
        color: white;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: inherit;
        box-shadow: var(--shadow-md);
      }

      .primary-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .primary-btn:active {
        transform: translateY(0);
      }

      .primary-btn svg {
        width: 20px;
        height: 20px;
      }

      .input-section,
      .output-section {
        display: flex;
        flex-direction: column;
        min-width: 0;
        min-height: 0;
        overflow: hidden;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .section-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--text-primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .label-icon {
        font-size: 1.25rem;
      }

      .button-group {
        display: flex;
        gap: 0.5rem;
      }

      .action-btn {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.5rem 0.75rem;
        font-size: 0.85rem;
        font-weight: 500;
        color: var(--primary);
        background: var(--bg-main);
        border: 1px solid var(--border);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-family: inherit;
      }

      .action-btn:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: translateY(-1px);
        box-shadow: var(--shadow-sm);
      }

      .action-btn:active {
        transform: translateY(0);
      }

      .action-btn.success {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }

      .action-btn svg {
        width: 16px;
        height: 16px;
      }

      .tool-input {
        width: 100%;
        flex: 1;
        min-height: 0;
        padding: 1rem;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.5;
        border: 2px solid var(--border);
        border-radius: 12px;
        background: var(--bg-main);
        color: var(--text-primary);
        resize: none;
        transition: all 0.2s ease;
      }

      .tool-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .tool-input::placeholder {
        color: var(--text-secondary);
        opacity: 0.6;
      }

      .tool-output {
        width: 100%;
        min-height: 200px;
        padding: 1rem;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.5;
        background: var(--bg-main);
        border: 2px solid var(--border);
        border-radius: 12px;
        white-space: pre-wrap;
        word-break: break-word;
        color: var(--text-secondary);
        transition: all 0.3s ease;
      }

      .tool-output.success {
        background: var(--success-bg);
        border-color: var(--success);
        color: var(--text-primary);
      }

      .tool-output.error {
        background: var(--error-bg);
        border-color: var(--error);
        color: var(--error);
      }



      .success-badge,
      .error-badge {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      .success-badge {
        color: var(--success);
      }

      .error-badge {
        color: var(--error);
      }

      .json-info {
        font-size: 0.85rem;
        color: var(--text-secondary);
        margin-top: 0.5rem;
      }

      .error-message {
        font-size: 0.85rem;
        margin-top: 0.5rem;
        padding: 0.75rem;
        background: rgba(239, 68, 68, 0.1);
        border-radius: 8px;
      }

      .prose {
        margin-top: 3rem;
        padding-top: 3rem;
        border-top: 2px solid var(--border);
      }

      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        h1 {
          font-size: 1.75rem;
        }

        .tool-wrapper {
          min-height: 400px;
        }

        .tool-container {
          grid-template-columns: 1fr;
          padding: 1.5rem;
          gap: 1rem;
        }

        .tool-container.three-column {
          grid-template-columns: 1fr;
        }

        .middle-buttons {
          flex-direction: row;
          padding: 0;
        }

        .middle-buttons .primary-btn {
          flex: 1;
          min-width: auto;
        }

        .tool-input {
          min-height: 150px;
        }

        .section-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.5rem;
        }

        .button-group {
          width: 100%;
        }

        .action-btn {
          flex: 1;
        }

        .action-buttons {
          flex-direction: column;
        }

        .primary-btn {
          width: 100%;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .tool-wrapper {
        animation: fadeIn 0.5s ease;
      }
    </style>
  </head>
  <body>
    <h1>{h1}</h1>

    <!-- Â∑•ÂÖ∑Âå∫Âüü -->
    <div set:html={toolHtml} />

    <!-- ÂÜÖÂÆπÂå∫Âüü -->
    <section class="mt-8 prose">
      <Content />
    </section>

    <!-- Â∑•ÂÖ∑ËÑöÊú¨ -->
    {toolScript && <script set:html={toolScript} is:inline />}
    
    <!-- ÈÄöÁî®ÊåâÈíÆÂäüËÉΩËÑöÊú¨ -->
    <script is:inline>
      function setupButtons() {
        // Â§çÂà∂ÊåâÈíÆ
        document.querySelectorAll('.copy-btn').forEach(btn => {
          btn.addEventListener('click', async () => {
            const target = btn.getAttribute('data-target');
            const element = document.getElementById(target);
            const text = element.value || element.textContent;
            
            try {
              await navigator.clipboard.writeText(text);
              const originalHTML = btn.innerHTML;
              btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Â∑≤Â§çÂà∂';
              btn.classList.add('success');
              
              setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('success');
              }, 2000);
            } catch (err) {
              alert('Â§çÂà∂Â§±Ë¥•: ' + err.message);
            }
          });
        });
        
        // Á≤òË¥¥ÊåâÈíÆ
        document.querySelectorAll('.paste-btn').forEach(btn => {
          btn.addEventListener('click', async () => {
            const target = btn.getAttribute('data-target');
            const element = document.getElementById(target);
            
            try {
              const text = await navigator.clipboard.readText();
              element.value = text;
              element.dispatchEvent(new Event('input'));
              
              const originalHTML = btn.innerHTML;
              btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Â∑≤Á≤òË¥¥';
              btn.classList.add('success');
              
              setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('success');
              }, 2000);
            } catch (err) {
              alert('Á≤òË¥¥Â§±Ë¥•: ' + err.message);
            }
          });
        });
      }
    </script>
  </body>
</html>
